document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ DOM carregado, inicializando dashboard...');
    
    // DEBUG: Verificar o que est√° no localStorage
    console.log('üîç DEBUG - localStorage completo:');
    for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        const value = localStorage.getItem(key);
        console.log(`üì¶ ${key}:`, value);
    }
    
    // Verificar se todos os elementos existem
    const domPronto = verificarElementosDOM();
    
    if (!domPronto) {
        console.warn('‚ö†Ô∏è Alguns elementos n√£o foram encontrados, mas continuando...');
    }
    
    // Inicializar √≠cones do Feather
    if (typeof feather !== 'undefined') {
        feather.replace();
    }
    
    // Carregar dados do dependente
    carregarDadosDependente();
    
    // Configurar eventos
    configurarEventos();
    
    console.log('üéØ Dashboard inicializado com sucesso!');
});

// Fun√ß√£o para verificar se todos os elementos necess√°rios existem
function verificarElementosDOM() {
    const elementosNecessarios = [
        'dependenteNome', 'dependenteIdade', 'dependenteCondicao',
        'dependenteFoto', 'cuidadorNome', 'cuidadorContato',
        'familiarName', 'ultimaAtualizacao', 'statusGeral',
        'pressaoMedia', 'glicemiaMedia', 'temperaturaMedia',
        'activityFeed', 'alertsList', 'lastMessage',
        'relatoriosLink'
    ];

    const elementosFaltantes = [];
    
    elementosNecessarios.forEach(id => {
        const elemento = document.getElementById(id);
        if (!elemento) {
            elementosFaltantes.push(id);
            console.error(`‚ùå Elemento n√£o encontrado: ${id}`);
        } else {
            console.log(`‚úÖ Elemento encontrado: ${id}`);
        }
    });

    if (elementosFaltantes.length > 0) {
        console.warn('‚ö†Ô∏è Elementos faltantes no DOM:', elementosFaltantes);
        return false;
    }

    console.log('‚úÖ Todos os elementos necess√°rios est√£o presentes no DOM');
    return true;
}

// Fun√ß√£o para carregar dados do dependente
async function carregarDadosDependente() {
    try {
        console.log('üîç Iniciando carregamento de dados do dependente...');
        
        // Recuperar dependente selecionado do localStorage
        const dependenteSelecionado = JSON.parse(localStorage.getItem('dependenteSelecionado'));
        
        if (!dependenteSelecionado || !dependenteSelecionado.id) {
            console.error('‚ùå Nenhum dependente selecionado ou ID inv√°lido:', dependenteSelecionado);
            mostrarErro('Nenhum dependente selecionado. Por favor, selecione um dependente primeiro.');
            
            // Redirecionar para a p√°gina de dependentes ap√≥s 3 segundos
            setTimeout(() => {
                window.location.href = 'dependentes.html';
            }, 3000);
            return;
        }

        console.log('üìã Dependente selecionado:', dependenteSelecionado);

        // Buscar dados completos do dependente da API
        console.log('üåê Buscando dados da API...');
        const response = await fetch(`/api/dependentes/${dependenteSelecionado.id}`);
        
        if (!response.ok) {
            const errorText = await response.text();
            console.error('‚ùå Erro na resposta da API:', response.status, errorText);
            throw new Error(`Erro ${response.status}: ${errorText}`);
        }

        const dependente = await response.json();
        console.log('‚úÖ Dados do dependente recebidos:', dependente);

        // Atualizar interface imediatamente
        atualizarInterfaceDependente(dependente);

        // Carregar dados adicionais
        console.log('üîÑ Carregando dados adicionais...');
        await Promise.all([
            carregarSinaisVitais(dependente.id),
            carregarAtividades(dependente.id),
            carregarAlertas(dependente.id)
        ]);

        console.log('‚úÖ Todos os dados carregados com sucesso!');

    } catch (error) {
        console.error('‚ùå Erro ao carregar dados do dependente:', error);
        mostrarErro('Erro ao carregar dados do dependente: ' + error.message);
    }
}

// Fun√ß√£o para atualizar a interface com os dados do dependente
function atualizarInterfaceDependente(dependente) {
    console.log('Atualizando interface para dependente:', dependente);
    
    // Mapeamento de elementos para atualizar
    const elementosParaAtualizar = [
        { id: 'dependenteNome', valor: dependente.nome || 'Nome n√£o informado' },
        { id: 'dependenteIdade', valor: dependente.idade ? `${dependente.idade} anos` : 'Idade n√£o informada' },
        { id: 'dependenteCondicao', valor: dependente.condicao_principal || 'Condi√ß√£o n√£o informada' },
        { id: 'cuidadorNome', valor: dependente.cuidador_nome || 'Cuidador n√£o atribu√≠do' },
        { id: 'cuidadorContato', valor: dependente.cuidador_telefone || 'Contato n√£o informado' },
        { id: 'familiarName', valor: dependente.familiar_nome || 'Familiar n√£o informado' },
        { id: 'ultimaAtualizacao', valor: new Date().toLocaleString('pt-BR') }
    ];

    // Atualizar cada elemento verificando se existe
    elementosParaAtualizar.forEach(item => {
        const elemento = document.getElementById(item.id);
        if (elemento) {
            elemento.textContent = item.valor;
            console.log(`‚úÖ Elemento ${item.id} atualizado:`, item.valor);
        } else {
            console.error(`‚ùå Elemento n√£o encontrado: ${item.id}`);
        }
    });

    // Foto do dependente - CORRE√á√ÉO DA FOTO
    const fotoElement = document.getElementById('dependenteFoto');
    if (fotoElement) {
        if (dependente.foto_url && dependente.foto_url !== 'null' && dependente.foto_url !== 'undefined') {
            // Verificar se a URL √© completa ou relativa
            let fotoUrl = dependente.foto_url;
            if (!fotoUrl.startsWith('http') && !fotoUrl.startsWith('/')) {
                fotoUrl = '/' + fotoUrl;
            }
            fotoElement.src = fotoUrl;
            
            // Adicionar tratamento de erro para a imagem
            fotoElement.onerror = function() {
                console.error('‚ùå Erro ao carregar imagem:', fotoUrl);
                this.src = '../assets/default-avatar.png';
                this.alt = 'Foto n√£o dispon√≠vel';
            };
            
            fotoElement.onload = function() {
                console.log('‚úÖ Foto carregada com sucesso:', fotoUrl);
            };
            
            console.log('‚úÖ Foto definida:', fotoUrl);
        } else {
            fotoElement.src = '../assets/default-avatar.png';
            fotoElement.alt = 'Foto padr√£o';
            console.log('‚úÖ Foto padr√£o definida');
        }
    } else {
        console.error('‚ùå Elemento da foto n√£o encontrado');
    }
}

// Fun√ß√£o para carregar sinais vitais
async function carregarSinaisVitais(pacienteId) {
    try {
        console.log('üíì Carregando sinais vitais...');
        const response = await fetch(`/api/pacientes/${pacienteId}/sinais-vitais/recentes`);
        
        if (response.ok) {
            const sinais = await response.json();
            console.log('‚úÖ Sinais vitais recebidos:', sinais);
            atualizarSinaisVitais(sinais);
        } else {
            console.log('‚ö†Ô∏è API de sinais vitais n√£o respondeu, usando dados padr√£o');
            atualizarSinaisVitais([]);
        }
    } catch (error) {
        console.error('‚ùå Erro ao carregar sinais vitais:', error);
        atualizarSinaisVitais([]);
    }
}

// Fun√ß√£o para atualizar sinais vitais na tela
function atualizarSinaisVitais(sinais) {
    console.log('üìä Atualizando sinais vitais na interface:', sinais);
    
    if (!sinais || sinais.length === 0) {
        // Dados padr√£o quando n√£o h√° sinais
        console.log('üìã Usando sinais vitais padr√£o');
        const sinaisPadrao = [
            { tipo: 'pressao_arterial', valor_principal: '120', valor_secundario: '80' },
            { tipo: 'glicemia', valor_principal: '98' },
            { tipo: 'temperatura', valor_principal: '36.5' }
        ];
        sinais = sinaisPadrao;
    }

    sinais.forEach(sinal => {
        switch(sinal.tipo) {
            case 'pressao_arterial':
                if (document.getElementById('pressaoMedia')) {
                    document.getElementById('pressaoMedia').textContent = 
                        `${sinal.valor_principal || '--'}/${sinal.valor_secundario || '--'}`;
                }
                if (document.getElementById('pressaoStatus')) {
                    document.getElementById('pressaoStatus').textContent = avaliarPressao(sinal);
                    document.getElementById('pressaoStatus').className = `badge ${obterClasseStatusPressao(sinal)}`;
                }
                break;
                
            case 'glicemia':
                if (document.getElementById('glicemiaMedia')) {
                    document.getElementById('glicemiaMedia').textContent = sinal.valor_principal || '--';
                }
                if (document.getElementById('glicemiaStatus')) {
                    document.getElementById('glicemiaStatus').textContent = avaliarGlicemia(sinal);
                    document.getElementById('glicemiaStatus').className = `badge ${obterClasseStatusGlicemia(sinal)}`;
                }
                break;
                
            case 'temperatura':
                if (document.getElementById('temperaturaMedia')) {
                    document.getElementById('temperaturaMedia').textContent = sinal.valor_principal || '--';
                }
                if (document.getElementById('temperaturaStatus')) {
                    document.getElementById('temperaturaStatus').textContent = avaliarTemperatura(sinal);
                    document.getElementById('temperaturaStatus').className = `badge ${obterClasseStatusTemperatura(sinal)}`;
                }
                break;
        }
    });

    // Atualizar status geral
    atualizarStatusGeral(sinais);
}

// Fun√ß√£o para carregar atividades
async function carregarAtividades(pacienteId) {
    try {
        console.log('üìÖ Carregando atividades...');
        const periodo = document.getElementById('periodoFilter')?.value || 'hoje';
        const response = await fetch(`/api/pacientes/${pacienteId}/atividades?periodo=${periodo}`);
        
        if (response.ok) {
            const atividades = await response.json();
            console.log('‚úÖ Atividades recebidas:', atividades);
            exibirAtividades(atividades);
        } else {
            console.log('‚ö†Ô∏è API de atividades n√£o respondeu, exibindo estado vazio');
            exibirAtividades([]);
        }
    } catch (error) {
        console.error('‚ùå Erro ao carregar atividades:', error);
        exibirAtividades([]);
    }
}

// Fun√ß√£o para exibir atividades
function exibirAtividades(atividades) {
    const activityFeed = document.getElementById('activityFeed');
    if (!activityFeed) {
        console.error('‚ùå Elemento activityFeed n√£o encontrado');
        return;
    }
    
    if (!atividades || atividades.length === 0) {
        activityFeed.innerHTML = `
            <div class="empty-state">
                <i data-feather="clock"></i>
                <p>Nenhuma atividade recente</p>
                <small class="text-muted">As atividades aparecer√£o aqui quando forem registradas</small>
            </div>
        `;
        if (typeof feather !== 'undefined') {
            feather.replace();
        }
        return;
    }

    const atividadesHTML = atividades.map(atividade => `
        <div class="activity-item">
            <div class="activity-icon ${atividade.tipo || 'default'}">
                <i data-feather="${obterIconeAtividade(atividade.tipo)}"></i>
            </div>
            <div class="activity-content">
                <h5>${atividade.titulo || 'Atividade'}</h5>
                <p>${atividade.descricao || 'Descri√ß√£o n√£o dispon√≠vel'}</p>
                <small class="activity-time">${formatarData(atividade.data || new Date())}</small>
            </div>
        </div>
    `).join('');

    activityFeed.innerHTML = atividadesHTML;
    
    if (typeof feather !== 'undefined') {
        feather.replace();
    }
}

// Fun√ß√£o para carregar alertas
async function carregarAlertas(pacienteId) {
    try {
        console.log('üö® Carregando alertas...');
        const response = await fetch(`/api/pacientes/${pacienteId}/alertas/recentes`);
        
        if (response.ok) {
            const alertas = await response.json();
            console.log('‚úÖ Alertas recebidos:', alertas);
            exibirAlertas(alertas);
        } else {
            console.log('‚ö†Ô∏è API de alertas n√£o respondeu, exibindo estado vazio');
            exibirAlertas([]);
        }
    } catch (error) {
        console.error('‚ùå Erro ao carregar alertas:', error);
        exibirAlertas([]);
    }
}

// Fun√ß√£o para exibir alertas
function exibirAlertas(alertas) {
    const alertsList = document.getElementById('alertsList');
    if (!alertsList) {
        console.error('‚ùå Elemento alertsList n√£o encontrado');
        return;
    }
    
    if (!alertas || alertas.length === 0) {
        alertsList.innerHTML = `
            <div class="empty-state">
                <i data-feather="bell-off"></i>
                <p>Nenhum alerta no momento</p>
                <small class="text-muted">Todos os indicadores est√£o dentro dos par√¢metros normais</small>
            </div>
        `;
        if (typeof feather !== 'undefined') {
            feather.replace();
        }
        return;
    }

    const alertasHTML = alertas.map(alerta => `
        <div class="alert-item ${alerta.nivel || 'info'}">
            <i data-feather="${obterIconeAlerta(alerta.nivel)}" class="alert-icon"></i>
            <div class="alert-content">
                <h5>${alerta.titulo || 'Alerta'}</h5>
                <p>${alerta.descricao || 'Descri√ß√£o n√£o dispon√≠vel'}</p>
                <small class="alert-time">${formatarData(alerta.data_criacao || new Date())}</small>
            </div>
        </div>
    `).join('');

    alertsList.innerHTML = alertasHTML;
    
    if (typeof feather !== 'undefined') {
        feather.replace();
    }
}

// Fun√ß√µes auxiliares
function obterIconeAtividade(tipo) {
    const icones = {
        'medicamento': 'pill',
        'vital': 'activity',
        'tarefa': 'check-square',
        'consulta': 'calendar',
        'alimentacao': 'coffee',
        'default': 'activity'
    };
    return icones[tipo] || icones.default;
}

function obterIconeAlerta(nivel) {
    const icones = {
        'critical': 'alert-triangle',
        'warning': 'alert-circle',
        'info': 'info',
        'default': 'bell'
    };
    return icones[nivel] || icones.default;
}

function formatarData(dataString) {
    try {
        const data = new Date(dataString);
        return data.toLocaleDateString('pt-BR') + ' ' + data.toLocaleTimeString('pt-BR', {
            hour: '2-digit',
            minute: '2-digit'
        });
    } catch (error) {
        return 'Data n√£o dispon√≠vel';
    }
}

function avaliarPressao(sinal) {
    const valor = parseInt(sinal.valor_principal);
    if (isNaN(valor)) return '--';
    if (valor < 90) return 'Baixa';
    if (valor > 140) return 'Alta';
    return 'Normal';
}

function avaliarGlicemia(sinal) {
    const valor = parseInt(sinal.valor_principal || sinal.valor);
    if (isNaN(valor)) return '--';
    if (valor < 70) return 'Baixa';
    if (valor > 180) return 'Alta';
    return 'Normal';
}

function avaliarTemperatura(sinal) {
    const valor = parseFloat(sinal.valor_principal || sinal.valor);
    if (isNaN(valor)) return '--';
    if (valor < 36) return 'Baixa';
    if (valor > 37.5) return 'Alta';
    return 'Normal';
}

function obterClasseStatusPressao(sinal) {
    const status = avaliarPressao(sinal);
    return status === 'Normal' ? 'bg-success' : 'bg-warning';
}

function obterClasseStatusGlicemia(sinal) {
    const status = avaliarGlicemia(sinal);
    return status === 'Normal' ? 'bg-success' : 'bg-warning';
}

function obterClasseStatusTemperatura(sinal) {
    const status = avaliarTemperatura(sinal);
    return status === 'Normal' ? 'bg-success' : 'bg-warning';
}

function atualizarStatusGeral(sinais) {
    let statusGeral = 'Est√°vel';
    let classeStatus = 'bg-success';

    // Verificar se h√° algum sinal preocupante
    const temProblemas = sinais.some(sinal => {
        if (sinal.tipo && sinal.tipo.includes('pressao')) {
            return avaliarPressao(sinal) !== 'Normal';
        }
        if (sinal.tipo && sinal.tipo.includes('glicemia')) {
            return avaliarGlicemia(sinal) !== 'Normal';
        }
        return false;
    });

    if (temProblemas) {
        statusGeral = 'Aten√ß√£o';
        classeStatus = 'bg-warning';
    }

    const statusElement = document.getElementById('statusGeral');
    if (statusElement) {
        statusElement.textContent = statusGeral;
        statusElement.className = `badge ${classeStatus}`;
    }
}

// FUN√á√ÉO CONFIGURAR EVENTOS - CORRIGIDA E UNIFICADA
function configurarEventos() {
    console.log('‚öôÔ∏è Configurando eventos...');
    
    // Filtro de per√≠odo
    const periodoFilter = document.getElementById('periodoFilter');
    if (periodoFilter) {
        periodoFilter.addEventListener('change', function() {
            console.log('üîç Filtro de per√≠odo alterado:', this.value);
            const dependente = JSON.parse(localStorage.getItem('dependenteSelecionado'));
            if (dependente && dependente.id) {
                carregarAtividades(dependente.id);
            }
        });
        console.log('‚úÖ Filtro de per√≠odo configurado');
    } else {
        console.error('‚ùå Filtro de per√≠odo n√£o encontrado');
    }

    // Formul√°rio de mensagem
    const messageForm = document.getElementById('messageForm');
    if (messageForm) {
        messageForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const textarea = this.querySelector('textarea');
            const mensagem = textarea.value.trim();
            
            if (mensagem) {
                enviarMensagem(mensagem);
                textarea.value = '';
            }
        });
        console.log('‚úÖ Formul√°rio de mensagem configurado');
    } else {
        console.error('‚ùå Formul√°rio de mensagem n√£o encontrado');
    }

    // Bot√£o de exportar relat√≥rio
    const exportBtn = document.getElementById('exportReportBtn');
    if (exportBtn) {
        exportBtn.addEventListener('click', exportarRelatorio);
        console.log('‚úÖ Bot√£o de exportar relat√≥rio configurado');
    } else {
        console.error('‚ùå Bot√£o de exportar relat√≥rio n√£o encontrado');
    }

    // ‚úÖ CORRE√á√ÉO: Links de Navega√ß√£o
    const relatoriosLink = document.getElementById('relatoriosLink');
    const alertasLink = document.getElementById('alertasLink');
    const comunicacaoLink = document.getElementById('comunicacaoLink');

    // Configurar link de Relat√≥rios
    if (relatoriosLink) {
        relatoriosLink.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('üìä Navegando para relat√≥rios...');
            navegarParaPaginaSupervisor('relatorios_supervisor.html');
        });
        console.log('‚úÖ Link de relat√≥rios configurado');
    } else {
        console.error('‚ùå Link de relat√≥rios n√£o encontrado');
    }

    // Configurar link de Alertas
    if (alertasLink) {
        alertasLink.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('üö® Navegando para alertas...');
            navegarParaPaginaSupervisor('alertas_supervisor.html');
        });
        console.log('‚úÖ Link de alertas configurado');
    } else {
        console.error('‚ùå Link de alertas n√£o encontrado');
    }

    // Configurar link de Comunica√ß√£o
    if (comunicacaoLink) {
        comunicacaoLink.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('üí¨ Navegando para comunica√ß√£o...');
            navegarParaPaginaSupervisor('comunicacao_supervisor.html');
        });
        console.log('‚úÖ Link de comunica√ß√£o configurado');
    } else {
        console.error('‚ùå Link de comunica√ß√£o n√£o encontrado');
    }

    // Logout
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
        logoutBtn.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('üö™ Efetuando logout...');
            localStorage.clear();
            sessionStorage.clear();
            window.location.href = '../paginas/index.html';
        });
        console.log('‚úÖ Bot√£o de logout configurado');
    } else {
        console.error('‚ùå Bot√£o de logout n√£o encontrado');
    }
}

// ‚úÖ CORRE√á√ÉO: Fun√ß√£o auxiliar para navega√ß√£o do supervisor
function navegarParaPaginaSupervisor(pagina) {
    // Verificar se h√° um dependente selecionado
    const dependenteSelecionado = JSON.parse(localStorage.getItem('dependenteSelecionado'));
    if (!dependenteSelecionado || !dependenteSelecionado.id) {
        mostrarErro('Nenhum dependente selecionado. Por favor, selecione um dependente primeiro.');
        return;
    }
    
    // Buscar usu√°rio no formato atual (chaves separadas)
    let usuarioLogado = null;
    const usuarioTipo = localStorage.getItem('usuarioTipo');
    const usuarioId = localStorage.getItem('usuarioId');
    const usuarioNome = localStorage.getItem('usuarioNome');
    
    if (usuarioTipo && usuarioId) {
        usuarioLogado = {
            tipo: usuarioTipo,
            id: parseInt(usuarioId),
            nome: usuarioNome || 'Usu√°rio'
        };
        console.log('‚úÖ Usu√°rio montado a partir de chaves separadas:', usuarioLogado);
    } else {
        // Tentar o m√©todo antigo (objeto √∫nico)
        const possiveisChaves = [
            'usuarioLogado', 'currentUser', 'userData', 'loginData',
            'usuario', 'user', 'loggedUser', 'userInfo'
        ];
        
        for (const chave of possiveisChaves) {
            const dados = localStorage.getItem(chave) || sessionStorage.getItem(chave);
            if (dados) {
                try {
                    usuarioLogado = JSON.parse(dados);
                    console.log(`‚úÖ Usu√°rio encontrado na chave: ${chave}`, usuarioLogado);
                    break;
                } catch (e) {
                    console.log(`‚ùå Erro ao parsear chave ${chave}:`, e);
                }
            }
        }
    }
    
    if (!usuarioLogado) {
        console.error('‚ùå Nenhum usu√°rio encontrado!');
        mostrarErro('Sess√£o expirada. Redirecionando para login...');
        setTimeout(() => {
            localStorage.clear();
            sessionStorage.clear();
            window.location.href = '../paginas/LandingPage.html';
        }, 2000);
        return;
    }
    
    // Garantir que o usu√°rio est√° salvo corretamente
    localStorage.setItem('usuarioLogado', JSON.stringify(usuarioLogado));
    localStorage.setItem('currentUser', JSON.stringify(usuarioLogado));
    
    console.log('‚úÖ Usu√°rio garantido no localStorage:', usuarioLogado);
    
    // Verifica√ß√£o flex√≠vel do tipo de usu√°rio
    const tipoUsuario = usuarioLogado.tipo || usuarioLogado.tipo_usuario || usuarioLogado.role || usuarioLogado.type;
    console.log('üë§ Tipo de usu√°rio detectado:', tipoUsuario);
    
    const isFamiliarContratante = 
        tipoUsuario === 'familiar_contratante' || 
        tipoUsuario === 'familiar contratante' ||
        tipoUsuario === 'supervisor' ||
        tipoUsuario === 'admin' ||
        tipoUsuario === 'familiar';

    if (!isFamiliarContratante) {
        console.error('‚ùå Usu√°rio n√£o √© familiar contratante:', tipoUsuario);
        mostrarErro('Acesso n√£o autorizado. Apenas familiares contratantes podem acessar esta p√°gina.');
        return;
    }
    
    console.log(`‚úÖ Usu√°rio autorizado, redirecionando para ${pagina}...`);
    
    // ‚úÖ CORRE√á√ÉO: Redirecionar com o caminho correto
    // Ajuste o caminho conforme sua estrutura de pastas
    window.location.href = pagina;
}

async function enviarMensagem(mensagem) {
    try {
        const dependente = JSON.parse(localStorage.getItem('dependenteSelecionado'));
        
        // Simular envio de mensagem (implementar API real depois)
        console.log('Enviando mensagem para o cuidador:', mensagem);
        
        mostrarSucesso('Mensagem enviada com sucesso!');
        
        // Atualizar preview da √∫ltima mensagem
        const lastMessageElement = document.getElementById('lastMessage');
        if (lastMessageElement) {
            lastMessageElement.innerHTML = `
                <p><strong>Voc√™:</strong> ${mensagem}</p>
                <small class="text-muted">Agora</small>
            `;
        }
        
    } catch (error) {
        console.error('Erro ao enviar mensagem:', error);
        mostrarErro('Erro ao enviar mensagem');
    }
}

async function exportarRelatorio() {
    try {
        // Implementar l√≥gica de exporta√ß√£o de relat√≥rio
        console.log('üìÑ Exportando relat√≥rio...');
        mostrarSucesso('Relat√≥rio exportado com sucesso!');
    } catch (error) {
        console.error('Erro ao exportar relat√≥rio:', error);
        mostrarErro('Erro ao exportar relat√≥rio');
    }
}

// Fun√ß√µes de notifica√ß√£o
function mostrarSucesso(mensagem) {
    console.log('‚úÖ ' + mensagem);
    alert('‚úÖ ' + mensagem);
}

function mostrarErro(mensagem) {
    console.error('‚ùå ' + mensagem);
    alert('‚ùå ' + mensagem);
}

// Atualizar √≠cones periodicamente
setInterval(() => {
    if (typeof feather !== 'undefined') {
        feather.replace();
    }
}, 1000);

console.log('üéØ dashboard_supervisor.js carregado com sucesso!');